# ==================== AI ORCHESTRATOR SERVICE ====================
#
# ENVIRONMENT MODES:
# ┌──────────────────────────────────────────────────────────────────────────┐
# │  MODE              │ SERVICE_URL PATTERN         │ RABBITMQ HOST         │
# ├──────────────────────────────────────────────────────────────────────────┤
# │  Local Dev (npm)   │ http://localhost:PORT       │ localhost:5672        │
# │  Docker Compose    │ http://service-name:PORT    │ rabbitmq:5672         │
# │  Docker Swarm      │ http://service-name:PORT    │ rabbitmq:5672         │
# └──────────────────────────────────────────────────────────────────────────┘
#
# IMPORTANT: This service is STATELESS (no database) and communicates via:
# - RabbitMQ: Consume incoming messages, publish AI replies
# - REST: Sync calls to Channel/Case services for data
# ============================================================================

# Environment
NODE_ENV=development
PORT=3002

# Google Gemini API
GEMINI_API_KEY=your_gemini_api_key_here

# RabbitMQ
# Local Dev: localhost:5672
# Docker: rabbitmq:5672
RABBITMQ_URL=amqp://admin:rabbitmq_secret_2025@rabbitmq:5672/govconnect

# ==================== INTERNAL SERVICE URLS ====================
# These are for internal service-to-service communication
# In Docker (Compose/Swarm): Use container names (channel-service, case-service)
# In Local Dev: Use localhost with respective ports
#
# ┌─────────────────────────────────────────────────────────────────────────────┐
# │  LOCAL DEVELOPMENT (npm run dev)                                            │
# │  ─────────────────────────────────────────────────────────────────────────  │
# │  CHANNEL_SERVICE_URL=http://localhost:3001                                  │
# │  CASE_SERVICE_URL=http://localhost:3003                                     │
# │  DASHBOARD_SERVICE_URL=http://localhost:3000                                │
# ├─────────────────────────────────────────────────────────────────────────────┤
# │  DOCKER (Compose/Swarm) - Uses internal Docker network                      │
# │  ─────────────────────────────────────────────────────────────────────────  │
# │  CHANNEL_SERVICE_URL=http://channel-service:3001                            │
# │  CASE_SERVICE_URL=http://case-service:3003                                  │
# │  DASHBOARD_SERVICE_URL=http://dashboard:3000                                │
# └─────────────────────────────────────────────────────────────────────────────┘
#
CHANNEL_SERVICE_URL=http://channel-service:3001
CASE_SERVICE_URL=http://case-service:3003
DASHBOARD_SERVICE_URL=http://dashboard:3000

# Internal API Key (shared secret)
INTERNAL_API_KEY=govconnect_internal_secret_key_2025_change_in_production

# Logging
LOG_LEVEL=debug
LOG_DIR=logs

# LLM Configuration
# Note: Model selection is configured via Dashboard AI Settings, not ENV
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=2000
LLM_TIMEOUT_MS=30000

# Context Configuration
MAX_HISTORY_MESSAGES=30

# ==================== RATE LIMITING ====================
# Enable/disable rate limiting (true/false)
RATE_LIMIT_ENABLED=true
# Maximum reports per day per user
MAX_REPORTS_PER_DAY=5
# Cooldown between reports in seconds
COOLDOWN_SECONDS=30
# Auto-blacklist after N violations
AUTO_BLACKLIST_VIOLATIONS=10

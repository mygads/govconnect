{
  "info": {
    "_postman_id": "govconnect-api-collection",
    "name": "GovConnect API",
    "description": "Complete API collection for GovConnect microservices.\n\n## Services\n- Case Service (Port 3003) - Complaints & Service Requests\n- Channel Service (Port 3001) - WhatsApp Channel & Live Chat\n- AI Service (Port 3002) - AI Orchestrator & Knowledge Base\n- Dashboard (Port 3000) - Admin Dashboard\n\n## Authentication\n- Internal API: X-Internal-API-Key header\n- Dashboard: Bearer token",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "https://govconnect.my.id",
      "type": "string"
    }
                      "value": "baru"
                    },
                    {
                      "key": "limit",
                      "value": "20"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Complaint by ID",
              "request": {
                "method": "GET",
                "url": "{{case_service_url}}/laporan/{{complaint_id}}"
              }
            },
            {
              "name": "Get Complaint Statistics",
              "request": {
                "method": "GET",
                "url": "{{case_service_url}}/laporan/statistics"
              }
            },
            {
              "name": "Check Complaint Status",
              "request": {
                "method": "POST",
                "url": "{{case_service_url}}/laporan/{{complaint_id}}/check",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"wa_user_id\": \"{{wa_user_id}}\"\n}"
                }
              }
            },
            {
              "name": "Update Complaint Status",
              "request": {
                "method": "PATCH",
                "url": "{{case_service_url}}/laporan/{{complaint_id}}/status",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"proses\",\n  \"admin_notes\": \"Sedang ditindaklanjuti\"\n}"
                }
              }
            },
            {
              "name": "Cancel Complaint",
              "request": {
                "method": "POST",
                "url": "{{case_service_url}}/laporan/{{complaint_id}}/cancel",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"wa_user_id\": \"{{wa_user_id}}\",\n  \"cancel_reason\": \"Sudah selesai sendiri\"\n}"
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Statistics",
      "item": [
        {
          "name": "Get Overview",
          "request": {
            "method": "GET",
            "url": "{{case_service_url}}/statistics/overview"
          }
        },
        {
          "name": "Get By Category",
          "request": {
            "method": "GET",
            "url": "{{case_service_url}}/statistics/by-category"
          }
        },
        {
          "name": "Get By Status",
          "request": {
            "method": "GET",
            "url": "{{case_service_url}}/statistics/by-status"
          }
        },
        {
          "name": "Get Trends (Weekly)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{case_service_url}}/statistics/trends?period=weekly",
              "host": [
                "{{case_service_url}}"
              ],
              "path": [
                "statistics",
                "trends"
              ],
              "query": [
                {
                  "key": "period",
                  "value": "weekly"
                }
              ]
            }
          }
        },
        {
          "name": "Get Trends (Monthly)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{case_service_url}}/statistics/trends?period=monthly",
              "host": [
                "{{case_service_url}}"
              ],
              "path": [
                "statistics",
                "trends"
              ],
              "query": [
                {
                  "key": "period",
                  "value": "monthly"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Get User History",
          "request": {
            "method": "GET",
            "url": "{{case_service_url}}/user/{{wa_user_id}}/history",
            "header": [
              {
                "key": "X-Internal-API-Key",
                "value": "{{internal_api_key}}"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Channel Service",
      "item": [
        {
          "name": "Health",
          "item": [
            {
              "name": "Health Check",
              "request": {
                "method": "GET",
                "url": "{{channel_service_url}}/health"
              }
            },
            {
              "name": "Database Health",
              "request": {
                "method": "GET",
                "url": "{{channel_service_url}}/health/db"
              }
            },
            {
              "name": "RabbitMQ Health",
              "request": {
                "method": "GET",
                "url": "{{channel_service_url}}/health/rabbitmq"
              }
            }
          ]
        },
        {
          "name": "Messages",
          "item": [
            {
              "name": "Get Messages",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{channel_service_url}}/internal/messages?wa_user_id={{wa_user_id}}&limit=50",
                  "host": [
                    "{{channel_service_url}}"
                  ],
                  "path": [
                    "internal",
                    "messages"
                  ],
                  "query": [
                    {
                      "key": "wa_user_id",
                      "value": "{{wa_user_id}}"
                    },
                    {
                      "key": "limit",
                      "value": "50"
                    }
                  ]
                },
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            },
            {
              "name": "Store Message",
              "request": {
                "method": "POST",
                "url": "{{channel_service_url}}/internal/messages",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"wa_user_id\": \"{{wa_user_id}}\",\n  \"message\": \"Terima kasih atas laporan Anda\",\n  \"direction\": \"OUT\",\n  \"source\": \"AI\"\n}"
                }
              }
            },
            {
              "name": "Send Message",
              "request": {
                "method": "POST",
                "url": "{{channel_service_url}}/internal/send",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"wa_user_id\": \"{{wa_user_id}}\",\n  \"message\": \"Hello from API!\"\n}"
                }
              }
            },
            {
              "name": "Set Typing",
              "request": {
                "method": "POST",
                "url": "{{channel_service_url}}/internal/typing",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"wa_user_id\": \"{{wa_user_id}}\"\n}"
                }
              }
            }
          ]
        },
        {
          "name": "Live Chat & Takeover",
          "item": [
            {
              "name": "Get Conversations",
              "request": {
                "method": "GET",
                "url": "{{channel_service_url}}/internal/conversations",
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            },
            {
              "name": "Get Conversation",
              "request": {
                "method": "GET",
                "url": "{{channel_service_url}}/internal/conversations/{{wa_user_id}}",
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            },
            {
              "name": "Start Takeover",
              "request": {
                "method": "POST",
                "url": "{{channel_service_url}}/internal/takeover/{{wa_user_id}}",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"admin_id\": \"admin-uuid\",\n  \"admin_name\": \"Admin Name\"\n}"
                }
              }
            },
            {
              "name": "End Takeover",
              "request": {
                "method": "DELETE",
                "url": "{{channel_service_url}}/internal/takeover/{{wa_user_id}}",
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            },
            {
              "name": "Get Active Takeovers",
              "request": {
                "method": "GET",
                "url": "{{channel_service_url}}/internal/takeover",
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            },
            {
              "name": "Check Takeover Status",
              "request": {
                "method": "GET",
                "url": "{{channel_service_url}}/internal/takeover/{{wa_user_id}}/status",
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            },
            {
              "name": "Admin Send Message",
              "request": {
                "method": "POST",
                "url": "{{channel_service_url}}/internal/conversations/{{wa_user_id}}/send",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"message\": \"Hello from admin!\"\n}"
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "AI Service",
      "item": [
        {
          "name": "Health",
          "item": [
            {
              "name": "Health Check",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/health"
              }
            },
            {
              "name": "RabbitMQ Health",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/health/rabbitmq"
              }
            },
            {
              "name": "Services Health",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/health/services"
              }
            }
          ]
        },
        {
          "name": "Web Chat",
          "item": [
            {
              "name": "Send Message",
              "request": {
                "method": "POST",
                "url": "{{ai_service_url}}/api/webchat",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"session_id\": \"{{session_id}}\",\n  \"message\": \"Saya ingin membuat laporan jalan rusak\",\n  \"channel\": \"webchat\"\n}"
                }
              }
            },
            {
              "name": "Get Session History",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/api/webchat/{{session_id}}"
              }
            },
            {
              "name": "Clear Session",
              "request": {
                "method": "DELETE",
                "url": "{{ai_service_url}}/api/webchat/{{session_id}}"
              }
            },
            {
              "name": "Get Session Stats",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/api/webchat/stats"
              }
            },
            {
              "name": "Poll for Messages",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/api/webchat/{{session_id}}/poll"
              }
            }
          ]
        },
        {
          "name": "Knowledge",
          "item": [
            {
              "name": "Add Knowledge",
              "request": {
                "method": "POST",
                "url": "{{ai_service_url}}/api/knowledge",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"id\": \"kb-001\",\n  \"title\": \"Persyaratan KTP\",\n  \"content\": \"Untuk membuat KTP diperlukan: 1. Surat pengantar RT/RW, 2. Kartu Keluarga, 3. Akta kelahiran\",\n  \"category\": \"kependudukan\",\n  \"keywords\": [\"ktp\", \"identitas\"]\n}"
                }
              }
            },
            {
              "name": "Update Knowledge",
              "request": {
                "method": "PUT",
                "url": "{{ai_service_url}}/api/knowledge/kb-001",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"Persyaratan KTP (Updated)\",\n  \"content\": \"Untuk membuat KTP diperlukan: 1. Surat pengantar RT/RW, 2. Kartu Keluarga, 3. Akta kelahiran, 4. Pas foto 3x4\",\n  \"category\": \"kependudukan\"\n}"
                }
              }
            },
            {
              "name": "Get Knowledge",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/api/knowledge/kb-001",
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            },
            {
              "name": "Delete Knowledge",
              "request": {
                "method": "DELETE",
                "url": "{{ai_service_url}}/api/knowledge/kb-001",
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            },
            {
              "name": "Search Knowledge",
              "request": {
                "method": "POST",
                "url": "{{ai_service_url}}/api/knowledge/search",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"query\": \"cara membuat KTP\",\n  \"topK\": 5,\n  \"minScore\": 0.7\n}"
                }
              }
            },
            {
              "name": "Get Vector DB Stats",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/api/knowledge/stats",
                "header": [
                  {
                    "key": "X-Internal-API-Key",
                    "value": "{{internal_api_key}}"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "Processing Status",
          "item": [
            {
              "name": "Get Summary",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/api/status/summary"
              }
            },
            {
              "name": "Get Active Statuses",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/api/status/active"
              }
            },
            {
              "name": "Get User Status",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/api/status/{{wa_user_id}}"
              }
            }
          ]
        },
        {
          "name": "Analytics",
          "item": [
            {
              "name": "Get Model Stats",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/stats/models"
              }
            },
            {
              "name": "Get AI Analytics",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/stats/analytics"
              }
            },
            {
              "name": "Get Intent Distribution",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/stats/analytics/intents"
              }
            },
            {
              "name": "Get Token Usage",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/stats/analytics/tokens"
              }
            },
            {
              "name": "Get Dashboard Stats",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/stats/dashboard"
              }
            },
            {
              "name": "Analyze Complexity",
              "request": {
                "method": "POST",
                "url": "{{ai_service_url}}/stats/analyze-complexity",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"message\": \"Saya ingin membuat laporan jalan rusak di RT 01 RW 02\"\n}"
                }
              }
            }
          ]
        },
        {
          "name": "Rate Limiting",
          "item": [
            {
              "name": "Get Rate Limit Stats",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/rate-limit"
              }
            },
            {
              "name": "Check User Rate Limit",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/rate-limit/check/{{wa_user_id}}"
              }
            },
            {
              "name": "Get Blacklist",
              "request": {
                "method": "GET",
                "url": "{{ai_service_url}}/rate-limit/blacklist"
              }
            },
            {
              "name": "Add to Blacklist",
              "request": {
                "method": "POST",
                "url": "{{ai_service_url}}/rate-limit/blacklist",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"wa_user_id\": \"{{wa_user_id}}\",\n  \"reason\": \"Spam\",\n  \"expiresInDays\": 7\n}"
                }
              }
            },
            {
              "name": "Remove from Blacklist",
              "request": {
                "method": "DELETE",
                "url": "{{ai_service_url}}/rate-limit/blacklist/{{wa_user_id}}"
              }
            }
          ]
        }
      ]
    }
  ]
}
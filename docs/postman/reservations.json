{
  "name": "Service Requests",
  "item": [
    {
      "name": "Service Requests",
      "item": [
        {
          "name": "Get Service Requests",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{case_service_url}}/service-requests?status=OPEN&limit=20",
              "host": ["{{case_service_url}}"],
              "path": ["service-requests"],
              "query": [
                { "key": "status", "value": "OPEN" },
                { "key": "limit", "value": "20" }
              ]
            }
          }
        },
        {
          "name": "Create Service Request",
          "request": {
            "method": "POST",
            "url": "{{case_service_url}}/service-requests",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "X-Internal-API-Key", "value": "{{internal_api_key}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"service_id\": \"{{service_id}}\",\n  \"wa_user_id\": \"{{wa_user_id}}\",\n  \"citizen_data_json\": {\n    \"nama_lengkap\": \"John Doe\",\n    \"nik\": \"1234567890123456\",\n    \"alamat\": \"Jl. Merdeka No. 10\",\n    \"no_hp\": \"081234567890\"\n  },\n  \"requirement_data_json\": {\n    \"ktp\": \"file://ktp.jpg\"\n  }\n}"
            }
          }
        },
        {
          "name": "Get Service Request by ID",
          "request": { "method": "GET", "url": "{{case_service_url}}/service-requests/{{service_request_id}}" }
        },
        {
          "name": "Update Service Request Status",
          "request": {
            "method": "PATCH",
            "url": "{{case_service_url}}/service-requests/{{service_request_id}}/status",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"PROCESS\",\n  \"admin_notes\": \"Sedang diproses\"\n}" }
          }
        },
        {
          "name": "Cancel Service Request",
          "request": {
            "method": "POST",
            "url": "{{case_service_url}}/service-requests/{{service_request_id}}/cancel",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "X-Internal-API-Key", "value": "{{internal_api_key}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"wa_user_id\": \"{{wa_user_id}}\",\n  \"cancel_reason\": \"Berhalangan\"\n}" }
          }
        },
        {
          "name": "Get User History",
          "request": { "method": "GET", "url": "{{case_service_url}}/service-requests/history/{{wa_user_id}}" }
        }
      ]
    }
  ]
}
